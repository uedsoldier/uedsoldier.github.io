**Purpose**
- **Repo type:** Static portfolio site generated by a small Python build script using Jinja2 templates and a JSON data source.

**Big Picture**
- **Data-driven site:** Content lives in `data/portfolio.json` (languages + projects). The generator renders per-project detail pages and a main index from that data.
- **Generator:** `scripts/build.py` reads the JSON, renders Jinja templates (`templates/`), and copies/minifies `static/` into `dist/static/` for deployment.
- **Client:** The built HTML embeds `site-data` (the entire JSON) in `base.html` and individual `project-data` blobs in `project.html`. Client JS (`static/js/app.js` and `static/js/project-detail.js`) reads those JSON blocks to render dynamic UI pieces.

**Key files to inspect**
- **Build script:** [scripts/build.py](../scripts/build.py) — main entry point for local builds. Look here for media-resolution rules and output behavior.
- **Data:** [data/portfolio.json](../data/portfolio.json) — canonical source of projects, languages, labels and tech stacks.
- **Templates:** [templates/base.html](../templates/base.html), [templates/index.html](../templates/index.html), [templates/project.html](../templates/project.html).
- **Client code:** [static/js/app.js](../static/js/app.js), [static/js/project-detail.js](../static/js/project-detail.js).
- **Static assets:** `static/img/` — images/videos live here and are copied into `dist/static/img/`.

**Developer workflows (how to run & debug)**
- Install Python deps (required for build):
  - `pip install -r requirements.txt`
- Run the build locally (from repo root):
  - `python3 scripts/build.py` — generates `dist/`.
- Output: static site in `dist/` (files and `dist/static/` assets). Inspect `dist/index.html` and `dist/<project-slug>-<lang>.html`.
- Common error: missing minifier packages (`minify_html`, `rjsmin`, `rcssmin`) — `requirements.txt` includes them; install if build crashes.

**Project & media conventions (specific to this repo)**
- Projects appear in each language block under `data/portfolio.json` as separate objects. Each project object should include a stable numeric `id` (recommended) and `title`, `images`, `video_url`, etc. The build script looks for `project['id']` when resolving media.
- Media resolution logic (see `resolve_static_media` in [scripts/build.py](../scripts/build.py)):
  - If the data points to an existing `static/...` path, the build keeps it.
  - Otherwise it prefers `static/img/<project_id>/<basename>` if that folder exists — so you can move media into short numeric folders and keep data unchanged.
  - If no `<project_id>` folder, it checks `static/img/<slug>/` and `static/img/<basename>` as fallbacks.
- Practical example: Add project with `"id": 7` in both `es` and `en` entries (IDs must match across languages). Put images in `static/img/7/imagen.jpg`. In `portfolio.json` you can leave `img_path` as the older `static/img/imagen.jpg` and the build will pick up the file under `static/img/7/`.

**Client-side patterns**
- `base.html` injects the entire `data` JSON into a `<script id="site-data">` element. `static/js/app.js` reads this to render the index view. See [templates/base.html](../templates/base.html) and [static/js/app.js](../static/js/app.js).
- `project.html` injects a single project's JSON into `<script id="project-data">` for `static/js/project-detail.js` to read and build the gallery/tech list.

**Conventions & small gotchas**
- Keep project `id` consistent across languages; the build resolves media per-language using the per-language project objects.
- Template helpers: `static(path)` is defined in `scripts/build.py` and appends a `?v=<timestamp>` cache-busting query to `static/...` URLs — when editing templates prefer using this helper (templates already do).
- Slugs: `scripts/build.py` contains `slugify()` and `ascii_slug()` helpers; templates and links use slugs derived from `title`.

**Where to change behavior**
- Add new projects or change fields in `data/portfolio.json`.
- To change how images are resolved, edit `resolve_static_media()` in [scripts/build.py](../scripts/build.py).
- To change generated HTML structure, edit templates in [templates/](../templates/).

**If you want to add a new project (steps)**
1. Add project object to both `languages.es.projects` and `languages.en.projects` in `data/portfolio.json` with the same numeric `id`.
2. Place images/videos in `static/img/<id>/` (recommended) or anywhere under `static/img/`.
3. Run `python3 scripts/build.py` and inspect `dist/`.

**Extra notes for an AI agent**
- Prefer editing `data/portfolio.json` only where consistent across languages (IDs must match). Use `slugify()` from [scripts/build.py](../scripts/build.py) when creating new slugs.
- Be conservative: the build script expects minifiers listed in `requirements.txt`; do not remove those imports unless you also add safe fallbacks.